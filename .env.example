# ==========================================
# WebMusic v2 - Configuration Guide
# ==========================================
# Rename this file to .env before running docker-compose.
#
# This system can be deployed in two modes:
# 1. All-in-One: Everything runs on one machine.
# 2. Distributed: Backend/DB on NAS (Main), AI on Mac/GPU (Worker).

# ==========================================
# [PART 1] COMMON SETTINGS (Required for All)
# ==========================================

# --- Database Connection ---
# If running on Main Server (NAS): Use 'postgres' (container name)
# If running on AI Worker (Mac): This is unused, but keep defaults to avoid errors.
POSTGRES_HOST=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DB=webmusic

# --- Security ---
# Generate a random string for JWT. Both machines must match if you scale out (usually only needed on Main).
JWT_KEY=ChangeThisSecretKeyInProductionToSomethingSecureLongAndRandom

# --- External APIs ---
GEMINI_API_KEY_1=your_gemini_key_here

# ==========================================
# [PART 2] NODE ROLE CONFIGURATION
# ==========================================

# ----------------------------------------------------------------
# SCENARIO A: MAIN SERVER (NAS / VPS)
# Role: Runs Website, Database, API. Connects to AI.
# ----------------------------------------------------------------
# 1. Do not start local AI container (save RAM/CPU):
# COMPOSE_PROFILES=
#
# 2. Point to the AI Service:
#    - If AI is on the SAME machine: http://webmusic-ai-lyrics:5001
#    - If AI is on REMOTE machine (Mac): http://192.168.2.240:5001
AI_LYRICS_URL=http://webmusic-ai-lyrics:5001


# ----------------------------------------------------------------
# SCENARIO B: AI COMPUTE WORKER (Mac / GPU Server)
# Role: Only runs the AI Lyrics Service to support the Main Server.
# ----------------------------------------------------------------
# 1. Enable the AI container:
# COMPOSE_PROFILES=ai
#
# 2. AI Model Size (tiny, small, medium, large-v2):
#    - NAS/CPU: Use 'tiny'
#    - Mac M1/M2/GPU: Use 'small' or 'medium'
WHISPER_MODEL=tiny

# 3. Startup Command:
#    On this node, ONLY start the AI service to avoid running a duplicate DB:
#    $ docker-compose up -d ai-lyrics


# ==========================================
# [PART 3] ADVANCED (Optional)
# ==========================================
# If you need to override internal ports or other advanced Docker settings.
